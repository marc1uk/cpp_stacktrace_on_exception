Code taken directly from https://web.archive.org/web/20150706050621/http://blog.sjinks.pro/c-cpp/969-track-uncaught-exceptions, credit Опубликовано Vladimir (i believe, please open an issue to correct this if incorrect)
Stack overflow version from https://stackoverflow.com/a/11674810.
